<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>FC Alameda | Gesti√≥n Total PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#eef2f7;color:#333}
header{background:linear-gradient(135deg,#0b5ed7,#083c8c);color:white;padding:25px;text-align:center}
nav{background:#083c8c;display:flex;flex-wrap:wrap;justify-content:center}
nav button{background:none;border:none;color:white;padding:12px 16px;font-size:14px;font-weight:bold;cursor:pointer}
nav button:hover{background:#0b5ed7}
section{display:none;padding:25px;max-width:1300px;margin:auto}
section.active{display:block}
h2{text-align:center;color:#0b5ed7}
table{width:100%;border-collapse:collapse;background:white;margin-top:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#e9ecef}
form{background:white;padding:15px;margin-top:20px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
input,select,button{padding:8px;margin:5px}
button{background:#0b5ed7;color:white;border:none;cursor:pointer}
button:hover{background:#083c8c}
img{width:50px;height:50px;object-fit:cover;border-radius:6px}
.card{background:white;padding:15px;margin:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.flex{display:flex;flex-wrap:wrap;justify-content:center}
footer{text-align:center;background:#083c8c;color:white;padding:15px;margin-top:30px}

/* Marca Mohamed */
#marca{
position:fixed;
top:10px;
left:15px;
background:white;
color:#0b5ed7;
font-weight:bold;
padding:6px 14px;
border-radius:20px;
box-shadow:0 4px 10px rgba(0,0,0,0.2);
z-index:9999;
}

/* Panel herramientas */
#tools{
position:fixed;
bottom:20px;
left:20px;
display:flex;
flex-direction:column;
gap:8px;
}

#tools button{
font-size:12px;
padding:6px 10px;
border-radius:6px;
}
</style>
</head>
<body>

<div id="marca">Mohamed ¬©</div>

<header>
<h1>FC Alameda</h1>
<p>Gesti√≥n Profesional del Club</p>
</header>

<nav>
<button onclick="mostrar('resumen')">Resumen</button>
<button onclick="mostrar('jugadores')">Jugadores</button>
<button onclick="mostrar('partidos')">Partidos</button>
<button onclick="mostrar('trofeos')">Trofeos</button>
<button onclick="mostrar('merch')">Merchandising</button>
</nav>

<section id="resumen" class="active">
<h2>Resumen Econ√≥mico</h2>
<div class="flex">
<div class="card"><h3>Presupuesto</h3><p id="presupuesto"></p></div>
<div class="card"><h3>Gasto salarios</h3><p id="gastos"></p></div>
<div class="card"><h3>Balance</h3><p id="balance"></p></div>
</div>
<form onsubmit="setPresupuesto(event)">
<input id="pTotal" type="number" placeholder="Presupuesto total" required>
<button>Guardar presupuesto</button>
</form>
</section>

<section id="jugadores">
<h2>Jugadores</h2>
<table id="tablaJugadores"></table>
<form onsubmit="addJugador(event)">
<input id="jn" placeholder="Nombre" required>
<input id="jp" placeholder="Posici√≥n" required>
<input id="js" type="number" placeholder="Salario" required>
<input id="jf" type="file" accept="image/*">
<button>A√±adir</button>
</form>
</section>

<section id="partidos">
<h2>Partidos</h2>
<table id="tablaPartidos"></table>
<form onsubmit="addPartido(event)">
<input type="date" id="pf" required>
<input id="pr" placeholder="Rival" required>
<select id="pl">
<option>Local</option>
<option>Visitante</option>
</select>
<button>A√±adir</button>
</form>
</section>

<section id="trofeos">
<h2>Trofeos</h2>
<table id="tablaTrofeos"></table>
<form onsubmit="addTrofeo(event)">
<input id="ta" placeholder="A√±o" required>
<input id="tc" placeholder="Competici√≥n" required>
<button>A√±adir</button>
</form>
</section>

<section id="merch">
<h2>Merchandising</h2>
<table id="tablaMerch"></table>
<form onsubmit="addMerch(event)">
<input id="mn" placeholder="Producto" required>
<input id="mp" type="number" placeholder="Precio" required>
<input id="ms" type="number" placeholder="Stock" required>
<input id="mf" type="file" accept="image/*">
<button>A√±adir</button>
</form>
</section>

<div id="tools">
<button onclick="exportar()">üìÅ Exportar datos</button>
<button onclick="importar()">üìÇ Importar datos</button>
<button onclick="borrarTodo()">üóë Borrar todo</button>
</div>

<footer>
<p>¬© <span id="year"></span> FC Alameda ¬∑ Sistema Profesional</p>
</footer>

<script>
document.getElementById("year").innerText=new Date().getFullYear();

let jugadores=JSON.parse(localStorage.getItem('jugadores'))||[];
let partidos=JSON.parse(localStorage.getItem('partidos'))||[];
let trofeos=JSON.parse(localStorage.getItem('trofeos'))||[];
let merch=JSON.parse(localStorage.getItem('merch'))||[];
let presupuesto=Number(localStorage.getItem('presupuesto'))||100000;

function mostrar(id){
document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active')
}

function img64(file,cb){
if(!file){cb('');return;}
let r=new FileReader();
r.onload=e=>cb(e.target.result);
r.readAsDataURL(file)
}

function guardar(){
localStorage.setItem('jugadores',JSON.stringify(jugadores));
localStorage.setItem('partidos',JSON.stringify(partidos));
localStorage.setItem('trofeos',JSON.stringify(trofeos));
localStorage.setItem('merch',JSON.stringify(merch));
localStorage.setItem('presupuesto',presupuesto);
}

function render(){
tablaJugadores.innerHTML='<tr><th>Foto</th><th>Nombre</th><th>Posici√≥n</th><th>Salario</th><th></th></tr>'+
jugadores.map((j,i)=>`<tr>
<td>${j.f?'<img src="'+j.f+'">':''}</td>
<td contenteditable onblur="jugadores[${i}].n=this.innerText;guardar();render()">${j.n}</td>
<td contenteditable onblur="jugadores[${i}].p=this.innerText;guardar();render()">${j.p}</td>
<td contenteditable onblur="jugadores[${i}].s=this.innerText;guardar();render()">${j.s}</td>
<td><button onclick="jugadores.splice(${i},1);guardar();render()">X</button></td>
</tr>`).join('');

tablaPartidos.innerHTML='<tr><th>Fecha</th><th>Rival</th><th>Lugar</th><th></th></tr>'+
partidos.map((p,i)=>`<tr>
<td>${p.f}</td>
<td>${p.r}</td>
<td>${p.l}</td>
<td><button onclick="partidos.splice(${i},1);guardar();render()">X</button></td>
</tr>`).join('');

tablaTrofeos.innerHTML='<tr><th>A√±o</th><th>Competici√≥n</th><th></th></tr>'+
trofeos.map((t,i)=>`<tr>
<td>${t.a}</td>
<td>${t.c}</td>
<td><button onclick="trofeos.splice(${i},1);guardar();render()">X</button></td>
</tr>`).join('');

tablaMerch.innerHTML='<tr><th>Foto</th><th>Producto</th><th>Precio</th><th>Stock</th><th></th></tr>'+
merch.map((m,i)=>`<tr>
<td>${m.f?'<img src="'+m.f+'">':''}</td>
<td>${m.n}</td>
<td>${m.p}</td>
<td>${m.s}</td>
<td><button onclick="merch.splice(${i},1);guardar();render()">X</button></td>
</tr>`).join('');

let gasto=jugadores.reduce((t,j)=>t+Number(j.s||0),0);
document.getElementById('presupuesto').innerText=presupuesto+' ‚Ç¨';
document.getElementById('gastos').innerText=gasto+' ‚Ç¨';
document.getElementById('balance').innerText=(presupuesto-gasto)+' ‚Ç¨';

guardar();
}

function setPresupuesto(e){
e.preventDefault();
presupuesto=Number(pTotal.value);
guardar();
render();
e.target.reset()
}

function addJugador(e){
e.preventDefault();
img64(jf.files[0],img=>{
jugadores.push({n:jn.value,p:jp.value,s:js.value,f:img});
guardar();
render();
e.target.reset()
})
}

function addPartido(e){
e.preventDefault();
partidos.push({f:pf.value,r:pr.value,l:pl.value});
guardar();
render();
e.target.reset()
}

function addTrofeo(e){
e.preventDefault();
trofeos.push({a:ta.value,c:tc.value});
guardar();
render();
e.target.reset()
}

function addMerch(e){
e.preventDefault();
img64(mf.files[0],img=>{
merch.push({n:mn.value,p:mp.value,s:ms.value,f:img});
guardar();
render();
e.target.reset()
})
}

function exportar(){
let datos={jugadores,partidos,trofeos,merch,presupuesto};
let blob=new Blob([JSON.stringify(datos)],{type:"application/json"});
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="fc_alameda_backup.json";
a.click();
}

function importar(){
let input=document.createElement("input");
input.type="file";
input.accept="application/json";
input.onchange=e=>{
let reader=new FileReader();
reader.onload=function(){
let datos=JSON.parse(reader.result);
jugadores=datos.jugadores||[];
partidos=datos.partidos||[];
trofeos=datos.trofeos||[];
merch=datos.merch||[];
presupuesto=datos.presupuesto||100000;
guardar();
render();
};
reader.readAsText(e.target.files[0]);
};
input.click();
}

function borrarTodo(){
if(confirm("¬øSeguro que quieres borrar todo?")){
localStorage.clear();
location.reload();
}
}

render();
</script>
</body>
</html>
